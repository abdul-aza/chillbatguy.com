async function openPhantomSwap() {
    const phantom = window.solana && window.solana.isPhantom ? window.solana : null;

    if (!phantom) {
        alert("Phantom wallet not detected. Redirecting to download page.");
        window.open('https://phantom.app/download', '_blank');
        return;
    }

    try {
        const swapUrl = `https://phantom.app/ul/swap` +
            `?outputMint=${encodeURIComponent(TOKEN_ADDRESS)}` +
            `&inputMint=${encodeURIComponent(SOL_ADDRESS)}` +
            `&fixed=out` +
            `&amount=1000`;

        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

        console.log("Opening swap URL:", swapUrl);

        if (isMobile) {
            window.location.href = `phantom://browse/${encodeURIComponent(swapUrl)}`;
        } else {
            window.open(swapUrl, '_blank');
        }
    } catch (error) {
        console.error("Error opening Phantom swap:", error);
        alert("Failed to open Phantom swap interface.");
    }
}
